<html>
<head>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script type="text/javascript" src="libs/jquery.colors.pickers.hslLite.bundle.min.js"></script>
	<script type="text/javascript" src="../philipshue.js"></script>
	<style type="text/css" rel="stylesheet">
		html
		{
			background:#EFEFEF;
		}
		body
		{
			font-family:Arial,'sans-serif';
		}
		.block
		{
			margin:15px 0px;
		}
		.colourBox
		{
			width:500px;
			height:200px;
			border:1px dashed #000;
		}
		.colourBox .rgbValue,
		.colourBox .hslValue,
		.colourBox .xyValue
		{
			background:#FFF;
			background:rgba(255,255,255,0.8);
			padding:2px;
		}
	</style>
</head>
<body>
	<h1>PhilipsHueJS Example</h1>
	<div class="block">
		IP Address or Hostname
		<div>
			<input type="text" id="ipAddress" value="192.168.0.10" />
		</div>
	</div>
	<div class="block">
		Light Bulb
		<div>
			<select id="bulb">
				<option value="1" selected="selected">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
			</select>
		</div>
	</div>
	<div class="block">
		Choose Type/Model
		<div>
			<select id="type">
				<option value="hueBulbs">Hue Bulbs</option>
				<option value="livingColours">Living Colours</option>
				<option value="default">Default</option>
			</select>
		</div>
	</div>
	<div class="block">
		Choose Colour
		<div id="colourPicker"></div>
	</div>
	<div class="block">
		Selected Colour
		<div id="selectedColour" class="colourBox">
			<div class="rgbValue">&nbsp;</div>
			<div class="hslValue">&nbsp;</div>
			<div class="xyValue">&nbsp;</div>
		</div>
	</div>
	<div class="block">
		Conversion to XY and back
		<div id="transformedColour" class="colourBox">
			<div class="rgbValue">&nbsp;</div>
			<div class="hslValue">&nbsp;</div>
			<div class="xyValue">&nbsp;</div>
		</div>
	</div>
	<div class="block">
		<small>The Fine Print: This is in no way associated with Philips or the Hue lightbulbs. All trademarks belong to the registered owners.</small>
		<small>This example uses <a href="http://enideo.com/code/jquery-colors-pickers-hsl-plugin/">jQuery Colors Pickers HSL</a></small>
	</div>
	<script type="text/javascript">
		$(function()
		{
			var currentColour = $('#colourPicker').hslLiteColorPicker({
				h: 180, s: 100, l: 50,
				onChange: function(colour)
				{
					currentColour = colour;
					updateColour();
				}
			}).hslLiteColorPicker('color');
			
			window.nowHSL = function nowHSL()
			{
				var host = $('#ipAddress').val(), light = $('#bulb').val();
				var hsl = currentColour.inputColor;
				PhilipsHue.API.SetHSL(host, light, hsl[0], hsl[1], hsl[2]);
			}

			function updateColour()
			{
				var host = $('#ipAddress').val(), light = $('#bulb').val();

				var rgbData = currentColour.format('array3Octet');
				$('#selectedColour').css('background', currentColour.toString());
				$('#selectedColour .hslValue').text("HSL: " + PhilipsHue.Utilities.RGBToHSL(rgbData[0],rgbData[1],rgbData[2]));
				$('#selectedColour .rgbValue').text("RGB: " + rgbData.toString());
				var toXY = PhilipsHue.RGBToXY(rgbData[0],rgbData[1],rgbData[2], 'default');
				$('#selectedColour .xyValue').text("X: " + toXY.X + " - Y: " + toXY.Y);
				PhilipsHue.API.SetXY(host, light, toXY);
				//var hsl = currentColour.inputColor;
				//PhilipsHue.API.SetHSL(host, light, hsl[0], hsl[1], hsl[2]);

				var type = $('#type').val();
				toXY = PhilipsHue.RGBToXY(rgbData[0],rgbData[1],rgbData[2], type);
				var fromXY = PhilipsHue.XYToRGB(toXY, type);
				$('#transformedColour').css('background', "rgb(" + fromXY.Red + "," + fromXY.Green + "," + fromXY.Blue + ")");
				$('#transformedColour .rgbValue').text("RGB: " + fromXY.Red + "," + fromXY.Green + "," + fromXY.Blue);
				$('#transformedColour .xyValue').text("X: " + toXY.X + " - Y: " + toXY.Y);
			}

			$('#type').change(updateColour);
		});
	</script>
</body>
</html>